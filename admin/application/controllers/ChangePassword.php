 <?phpdefined('BASEPATH') OR exit('No direct script access allowed');class ChangePassword extends CI_Controller {	/**	 * Index Page for this controller.	 *	 * Maps to the following URL	 * 		http://example.com/index.php/welcome	 *	- or -	 * 		http://example.com/index.php/welcome/index	 *	- or -	 * Since this controller is set as the default controller in	 * config/routes.php, it's displayed at http://example.com/	 *	 * So any other public methods not prefixed with an underscore will	 * map to /index.php/welcome/<method_name>	 * @see https://codeigniter.com/user_guide/general/urls.html	 */	public function __construct(){		parent:: __construct();	    $this->load->model('ChangePassword_Modal');	    $this->load->library('form_validation');	    $this->admintable="admintable";		if (!isset($this->session->userdata('newdata')['logged_in'])) 		{			redirect('Login','refresh');		} 	}//--------------------------------------------- Index Page --------------------------------------->	public function index()	{		//echo "hii";die;		//$user_data=$this->session->userdata('newdata');    	//$uname=$user_data['uname'];		$data['result'] = $this->ChangePassword_Modal->fetch_data();	    $this->load->view('admin/changePassword',$data);	}    //--------------------------------------------- End ----------------------------------------------->	public function ChangePassword(){	    			if($this->input->post('btnVerify')) {				//echo "hello";				$old_password = md5($this->input->post('old_password'));				$new_password = md5($this->input->post('new_password'));				$confirm_password = md5($this->input->post('confirm_password'));				$this->form_validation->set_rules('old_password', 'Old Password', 'required|min_length[5]');				$this->form_validation->set_rules('new_password', 'Password', 'required|min_length[5]');				$this->form_validation->set_rules('confirm_password', 'Confirm Password','required|min_length[5]', 'required|matches[new_password]');				if ($this->form_validation->run() == FALSE)                {	                	echo "<script>alert('Seems like Old password doesn't match..:(')</script>";                	$data['result'] = $this->ChangePassword_Modal->fetch_data();                	$this->load->view('admin/changePassword',$data);                }				else{				    					$user_data=$this->session->userdata('newdata');    				$uname=$user_data['username'];					$result = $this->ChangePassword_Modal->user_checkold_pwd($old_password,$uname);					if($result)					{						$result = $this->ChangePassword_Modal->user_reset_pwd($confirm_password,$uname);						echo "<script>alert('Password Successfully Changed..!')</script>";						echo "<script>window.location.href='../Dashboard/index';</script>";					}					else{						echo "<script>alert('Oops old Password is Not match Try Again :(')</script>";							$this->index();					}				}			}			else{				$data['result'] = $this->ChangePassword_Modal->fetch_data();                $this->load->view('admin/changePassword',$data);			}		}			public function ChangeEmail(){			if($this->input->post('btnVerify')) {				//echo "hello";				$email = $this->input->post('email');				$this->form_validation->set_rules('email', 'Email-ID', 'required');				if ($this->form_validation->run() == FALSE)                {	                	echo "<script>alert('Something Wrong..:(')</script>";                	$data['result'] = $this->ChangePassword_Modal->fetch_data();                	$this->load->view('admin/changePassword',$data);                }				else{					$user_data=$this->session->userdata('newdata');    				$uname=$user_data['uname'];    				$email = $this->input->post('email');					$data=array(					        'email_id' => $email					    );										$result = $this->ChangePassword_Modal->resetemail($email,$uname);					if($result)					{						//$result = $this->ChangePassword_Modal->user_reset_pwd($confirm_password,$uname);						echo "<script>alert('Email_ID Successfully Changed..!')</script>";						echo "<script>window.location.href='../ChangePassword/index';</script>";					}					else{						echo "<script>alert('Email_ID Not Update..:(')</script>";							$this->index();					}				}			}			else{				$data['result'] = $this->ChangePassword_Modal->fetch_data();                $this->load->view('admin/changePassword',$data);			}					}}