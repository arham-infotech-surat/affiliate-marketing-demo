<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Testimonial extends CI_Controller {	/**	 * Index Page for this controller.	 *	 * Maps to the following URL	 * 		http://example.com/index.php/welcome	 *	- or -	 * 		http://example.com/index.php/welcome/index	 *	- or -	 * Since this controller is set as the default controller in	 * config/routes.php, it's displayed at http://example.com/	 *	 * So any other public methods not prefixed with an underscore will	 * map to /index.php/welcome/<method_name>	 * @see https://codeigniter.com/user_guide/general/urls.html	 */	public function __construct(){		parent:: __construct();	    $this->load->model('Testimonial_Modal');        $this->load->model('Team_Modal');	    $this->load->library('form_validation');		if (!isset($this->session->userdata('newdata')['logged_in'])) 		{			redirect('Login','refresh');		} 	   // $this->tbl_page="tbl_page";	}//--------------------------------------------- Index Page --------------------------------------->	public function view_testimonial()	{		//echo "hii";die;		$data['result'] = $this->Testimonial_Modal->fetch_testimonial();		$this->load->view('admin/testimonial-view',$data);	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- Add Testimonial --------------------------------------->	public function add_testimonial()	{		if($this->input->post('register'))		{            if(!empty($_FILES['image_name']['name']))			{			        //echo "hii";die;						$config['upload_path'] = 'assets/Uploads/Images/';						$config['allowed_types'] = 'jpg|jpeg|png';						$config['file_name'] = $_FILES['image_name']['name'];						$config['max_size']	= '1000';						//Load upload library and initialize configuration						$this->load->library('upload',$config);						$this->upload->initialize($config);						if($this->upload->do_upload('image_name')){						    //echo "in";die;							$uploadData = $this->upload->data();							$image_name = $uploadData['file_name'];						}						else						{						    //echo "sdnsd";die;							$image_name = '';						}				}				else				{					$image_name = '';				}                            //echo $image_name;die;            $team_id = $this->input->post('team_id');			//$image_name = $this->input->post('image_name');			$image_title = $this->input->post('image_title');			$description = $this->input->post('description');			$meta_tag_title = $image_title;			$meta_tag_description = $description;			$meta_tag_keywords = $image_title;			$recordListingID = $image_title;						$data = array(                'team_id' => $team_id,				'image' => $image_name,				'image_title' => $image_title,				'descr' => $description,				'meta_tag_title' => $meta_tag_title,				'meta_tag_description' => $meta_tag_description,				'meta_tag_keywords' => $meta_tag_keywords			);						$result = $this->Testimonial_Modal->insert_testimonial($data);			if($result)				{					//$this->db->insert('user_table',$data);					$this->session->set_flashdata('success', 'Record Added Successfully....');					redirect('Testimonial/add_testimonial');				}				else				{					$this->session->set_flashdata('success', 'Record Not Added....');					redirect('Testimonial/add_testimonial');				}		}		else		{            $data['result'] = $this->Team_Modal->fetch_teamdata();			$this->load->view('admin/add-testimonial',$data);		}	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- Testimonial ----------------------------------------------->	public function edit_testimonial()	{		if($this->uri->segment(3)===False)		{			$testimonial_id = 0;		}		else		{			$testimonial_id = $this->uri->segment(3);		}		//echo $testimonial_id;die;				$data['data'] = $this->Testimonial_Modal->get_testimonial_data($testimonial_id);        $data['result'] = $this->Team_Modal->fetch_teamdata();		$this->load->view('admin/update_testimonial',$data);	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- update ----------------------------------------------->	public function update_testimonial()	{		//echo "cnmbfh";die;		if($this->uri->segment(3)===FALSE)		{			$testimonial_id = 0;		}		else		{			$testimonial_id = $this->uri->segment(3);		}		//echo $testimonial_id;die;				if($this->input->post('update'))		{			//echo "hiee";die;			if(!empty($_FILES['image_name']['name']))			{			        //echo "hii";die;						$config['upload_path'] = 'assets/Uploads/Images/';						$config['allowed_types'] = 'jpg|jpeg|png';						$config['file_name'] = $_FILES['image_name']['name'];						$config['max_size']	= '1000';						//Load upload library and initialize configuration						$this->load->library('upload',$config);						$this->upload->initialize($config);						if($this->upload->do_upload('image_name')){						    //echo "in";die;							$uploadData = $this->upload->data();							$image_name = $uploadData['file_name'];						}						else						{						    //echo "sdnsd";die;							$image_name = '';						}				}				else				{					$image_name = $this->input->post('oldimage');				}                            //echo $image_name;die;            $team_id = $this->input->post('team_id');			//$image_name = $this->input->post('image_name');			$image_title = $this->input->post('image_title');			$description = $this->input->post('description');			$meta_tag_title = $image_title;			$meta_tag_description = $description;			$meta_tag_keywords = $image_title;			$recordListingID = $image_title;						$data = array(                'team_id' => $team_id,				'image' => $image_name,				'image_title' => $image_title,				'descr' => $description,				'meta_tag_title' => $meta_tag_title,				'meta_tag_description' => $meta_tag_description,				'meta_tag_keywords' => $meta_tag_keywords			);						$result = $this->Testimonial_Modal->update_testimonialdata($data,$testimonial_id);			if($result)			{				//$this->db->insert('user_table',$data);				$this->session->set_flashdata('success', 'Record Updated Successfully....');				redirect('Testimonial/view_testimonial');			}			else			{				$this->session->set_flashdata('success', 'Record Not Update....');				redirect('Testimonial/view_testimonial');			}		}	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- delete ----------------------------------------------->public function delete_testimonial()		{			if($this->uri->segment(3)===FALSE)			{				$testimonial_id = 0;			}			else			{				$testimonial_id = $this->uri->segment(3);			}						$result = $this->Testimonial_Modal->delete_single_testimonial($testimonial_id);			//$this->load->view('admin/update_project',$result);			if($result)			{				//$this->db->insert('user_table',$data);				$this->session->set_flashdata('success', 'Record Delete Successfully....');				redirect('Testimonial/view_testimonial');			}			else			{				$this->session->set_flashdata('success', 'Record Not Deleted....');				redirect('Testimonial/view_testimonial');			}		}//--------------------------------------------- End ----------------------------------------------->		public function testimonial_MultipleDelete(){		$delIds = $this->input->post('checkChk');		$this->Testimonial_Modal->testimonial_MultipleDeleted($delIds);			}}