  <?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Gallery extends CI_Controller {	/**	 * Index Page for this controller.	 *	 * Maps to the following URL	 * 		http://example.com/index.php/welcome	 *	- or -	 * 		http://example.com/index.php/welcome/index	 *	- or -	 * Since this controller is set as the default controller in	 * config/routes.php, it's displayed at http://example.com/	 *	 * So any other public methods not prefixed with an underscore will	 * map to /index.php/welcome/<method_name>	 * @see https://codeigniter.com/user_guide/general/urls.html	 */	public function __construct(){		parent:: __construct();	    $this->load->model('Gallery_Modal');	    $this->load->library('form_validation');	    $this->tbl_gallery_category="tbl_gallery_category";		if (!isset($this->session->userdata('newdata')['logged_in'])) 		{			redirect('Login','refresh');		} 	}//--------------------------------------------- Index Page --------------------------------------->	public function index()	{		$data['result'] = $this->Gallery_Modal->fetch_galleries();		$this->load->view('admin/gallery_CatView',$data);	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- Index Page --------------------------------------->	public function galleryView()	{		$data['result'] = $this->Gallery_Modal->fetch_cat_galleries();		$this->load->view('admin/galleryView',$data);	}//--------------------------------------------- End ----------------------------------------------->//--------------------------------------------- Gallery Add Page --------------------------------------->	public function galleryCategory()	{		// echo "hii----";		if($this->input->post('Add')) //if(isset($_POST['register']))		{			$slug=$this->input->post('slug'); //$_POST['user_name']			$cat_name=$this->input->post('cat_name');						$data = array(				'slug' =>  $slug,				'cat_name' => $cat_name			);							$result = $this->Gallery_Modal->insert_galleries($data);			if($result)			{				//$this->db->insert('user_table',$data);				$this->session->set_flashdata('success', 'Record Added Successfully....');				redirect('Gallery/index');			}			else			{				$this->session->set_flashdata('success', 'Record Not Added....');				redirect('Gallery/galleryCategory');			}		}			else		{			$this->load->view('admin/galleryCategory');		}	}//--------------------------------------------- End ----------------------------------------------->//-------------------------------------- Edit Galleries Category ----------------------------------->public function edit_galleries()	{			if($this->uri->segment(3) === false){ //$_GET['cat_id']			$cat_id = 0;		}		else{			$cat_id = $this->uri->segment(3);		}		//echo $cat_id; die;		$result['data'] = $this->Gallery_Modal->get_galleries_data($cat_id);		$this->load->view('admin/gallery_cat_update',$result);	}		//Update user	public function gallery_cat_update()	{		if($this->uri->segment(3) === false){ //$_GET['cat_id']			$cat_id = 0;		}		else{			$cat_id = $this->uri->segment(3);		}		//echo $cat_id; die;		if($this->input->post('Edit')) //if(isset($_POST['update']))		{			$slug=$this->input->post('slug'); //$_POST['user_name']			$cat_name=$this->input->post('cat_name');						$data = array(				'slug' =>  $slug,				'cat_name' => $cat_name			);							$result = $this->Gallery_Modal->gallery_cat_update($data,$cat_id);			if($result)			{			//$this->db->insert('user_table',$data);			$this->session->set_flashdata('success', 'Record Updated Successfully....');			redirect('Gallery/index');			}			else			{				$this->session->set_flashdata('success', 'Record Not Update....');				redirect('Gallery/edit_galleries');			}					}	}//------------------------------------------ End --------------------------------------------->//------------------------------------------ Delete Gallery Category ---------------------------->	public function delete_galleries()	{		if($this->uri->segment(3) === false){			$cat_id = 0;		}		else{			$cat_id = $this->uri->segment(3);		}		//echo $user_Id; die;				$result = $this->Gallery_Modal->gallery_catRemove($cat_id);						if($result){			redirect('Gallery/index');		}	}//--------------------------------------------- End ------------------------------------------------->//--------------------------------------------- Gallery Add Page --------------------------------------->	public function galleryAdd()	{		// echo "hii----";		if($this->input->post('Add')) //if(isset($_POST['register']))		{					if(!empty($_FILES['gallery_image']['name'])){				//echo "heyy";die;						$config['upload_path'] = 'assets/Uploads/Images/'; 						$config['allowed_types'] = 'jpg|jpeg|png|gif';						$config['file_name'] = $_FILES['gallery_image']['name'];												//Load upload library and initialize configuration						$this->load->library('upload',$config);						$this->upload->initialize($config);												if($this->upload->do_upload('gallery_image')){							//echo "hiee";die;							$uploadData = $this->upload->data();							$gallery_image = $uploadData['file_name'];						}else{							//echo "ngf";die;							$gallery_image = '';						}						//echo $gallery_image;die;					}						// echo $picture; die;				$slug=$this->input->post('slug'); //$_POST['user_name']				$gallery_name=$this->input->post('gallery_name');				$cat_ids=$this->input->post('cat_id');				$cat_id=implode(",", $cat_ids);				//echo "<pre>";				//print_r($cat_id); die;								// $gender=$this->input->post('gender');				// $hobbies_array=implode(",", $this->input->post('hobbies'));												$data = array(					'slug' =>  $slug,					'gallery_name' => $gallery_name,					'cat_id' =>  $cat_id,					'gallery_image' => $gallery_image				);									$result = $this->Gallery_Modal->insert_gallery($data);				if($result)				{					//$this->db->insert('user_table',$data);					$this->session->set_flashdata('success', 'Record Added Successfully....');					redirect('Gallery/galleryView');				}				else				{					$this->session->set_flashdata('success', 'Record Not Added....');					redirect('Gallery/galleryAdd');				}								}			else		{			$data['result'] = $this->Gallery_Modal->fetch_gallery_cat_data();			$this->load->view('admin/gallery',$data);		}	}//--------------------------------------------- End ----------------------------------------------->//-------------------------------------- Edit Galleries ----------------------------------->public function edit_cat_galleries()	{			if($this->uri->segment(3) === false){ //$_GET['cat_id']			$gallery_id = 0;		}		else{			$gallery_id = $this->uri->segment(3);		}		$result['galleries'] = $this->Gallery_Modal->fetch_gallery_cat_data();		$result['data'] = $this->Gallery_Modal->get_gallery($gallery_id);		$this->load->view('admin/gallery_up',$result);	}		//Update user	public function gallery_up()	{		if($this->uri->segment(3) === false){ //$_GET['gallery_id']			$gallery_id = 0;		}		else{			$gallery_id = $this->uri->segment(3);		}		//echo $gallery_id; die;		if($this->input->post('Edit')) //if(isset($_POST['update']))		{			if(!empty($_FILES['gallery_image']['name'])){				//echo "heyy";die;						$config['upload_path'] = 'assets/Uploads/Images/'; 						$config['allowed_types'] = 'jpg|jpeg|png|gif';						$config['file_name'] = $_FILES['gallery_image']['name'];												//Load upload library and initialize configuration						$this->load->library('upload',$config);						$this->upload->initialize($config);												if($this->upload->do_upload('gallery_image')){							//echo "hiee";die;							$uploadData = $this->upload->data();							$gallery_image = $uploadData['file_name'];						}else{							//echo "ngf";die;							$gallery_image = '';						}						//echo $gallery_image;die;					}			else{								$gallery_image = $this->input->post('oldimage');			}						$slug=$this->input->post('slug'); //$_POST['user_name']			$gallery_name=$this->input->post('gallery_name');			$cat_ids=$this->input->post('cat_id');			$cat_id=implode(",", $cat_ids);				//echo "<pre>";				//print_r($_POST); die;			$data = array(				'slug' =>  $slug,				'gallery_name' => $gallery_name,				'cat_id' => $cat_id,				'gallery_image' => $gallery_image,			);							$result = $this->Gallery_Modal->gallery_up($data,$gallery_id);			if($result)			{			//$this->db->insert('user_table',$data);			$this->session->set_flashdata('success', 'Record Updated Successfully....');			redirect('Gallery/galleryView');			}			else			{				$this->session->set_flashdata('success', 'Record Not Update....');				redirect('Gallery/edit_galleries');			}					}	}//---------------------------------------- Delete Gallery  -------------------------------------->	public function delete_cat_galleries()	{		if($this->uri->segment(3) === false){			$gallery_id = 0;		}		else{			$gallery_id = $this->uri->segment(3);		}		//echo $user_Id; die;				$result = $this->Gallery_Modal->remove_cat_galleries($gallery_id);						if($result){			redirect('Gallery/galleryView');		}	}//--------------------------------------------- End ------------------------------------------------->//-------------------------- Gallery Category Multiple Delete ----------------------->	public function gallery_cat_MultipleDelete(){		$delIds = $this->input->post('checkChk');		$this->Gallery_Modal->gallery_cat_MultipleDelete($delIds);			}//----------------------------------------- End ------------------------------------->//------------------------------- Gallery Multiple Delete --------------------------->	public function gallery_MultipleDelete(){		$delIds = $this->input->post('checkChk');		$this->Gallery_Modal->gallery_MultipleDelete($delIds);			}//------------------------------------------ End ----------------------------------->}